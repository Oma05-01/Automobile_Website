{% extends "base2.html" %}
{% load static %}

{% block content %}
  <link rel="stylesheet" href="{% static 'styles/car_search.css' %}">

  <!-- Search Form -->
  <h1>Car Search</h1>
  <form method="get">
    <label for="searched">Search for a car:</label>
    <input type="text" name="searched" value="{{ searched_car }}" placeholder="Search by name">

    <label for="car_type">Car Type:</label>
    <select name="car_type">
      <option value="">--All Types--</option>
      <option value="sedan">Sedan</option>
      <option value="SUV">SUV</option>
      <option value="electric">Electric</option>
      <!-- Add other types -->
    </select>

    <label for="min_price">Price Range:</label>
    <input type="number" name="min_price" placeholder="Min Price" min="0">
    <input type="number" name="max_price" placeholder="Max Price" min="0">

    <label for="year">Year:</label>
    <input type="number" name="year" placeholder="Car Year" min="1900" max="2100">

    <label for="mileage">Mileage (km):</label>
    <input type="number" name="mileage" placeholder="Max Mileage" min="0">

    <label for="location">Location:</label>
    <input type="text" name="location" placeholder="Location">

    <label for="available_for_testing">Available for Testing:</label>
    <select name="available_for_testing">
      <option value="">--Select--</option>
      <option value="available">Available</option>
      <option value="not_available">Not Available</option>
    </select>

    <button type="submit">Search</button>
  </form>

  <!-- Sort & Filter Section -->
  <h2>Filter & Sort Results</h2>
  <form method="get">
    <label for="sort_by">Sort by:</label>
    <select name="sort_by">
      <option value="price_low_to_high">Price (Low to High)</option>
      <option value="price_high_to_low">Price (High to Low)</option>
      <option value="most_recent">Most Recent</option>
      <option value="customer_rating">Customer Rating</option>
    </select>
    <button type="submit">Sort</button>
  </form>

  <!-- Cars List -->
  <h2>Cars</h2>
  <form method="get">
    <ul class="car-list">
      {% for car in cars %}
        <li class="car-item">
          <h3>{{ car.Car_name }} ({{ car.year }})</h3>
          <p>Price: ${{ car.price_per_day }} / day</p>
          <p>{{ car.Description }}</p>

          <!-- Car Comparison Checkbox -->
          <input type="checkbox" name="compare_cars" value="{{ car.id }}">
          Compare
        </li>
      {% empty %}
        <p>No cars found</p>
      {% endfor %}
    </ul>

    <button type="submit">Compare Selected Cars</button>
  </form>

  <!-- Car Comparison Table -->
  <h2>Comparison</h2>
  {% if selected_cars %}
    <table class="comparison-table">
      <tr>
        <th>Car Name</th>
        <th>Price</th>
        <th>Year</th>
        <th>Features</th>
        <!-- Add more fields to compare -->
      </tr>
      {% for car in selected_cars %}
        <tr>
          <td>{{ car.Car_name }}</td>
          <td>${{ car.price_per_day }}</td>
          <td>{{ car.year }}</td>
          <td>{{ car.Description }}</td>
          <!-- Add more fields to display -->
        </tr>
      {% endfor %}
    </table>
  {% else %}
    <p>No cars selected for comparison.</p>
  {% endif %}
{% endblock %}
